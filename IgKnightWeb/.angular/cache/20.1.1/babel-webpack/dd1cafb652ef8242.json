{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = /*#__PURE__*/(() => {\n  let GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    static #_ = GotoDefinitionAtPositionEditorContribution_1 = this;\n    static #_2 = this.ID = 'editor.contrib.gotodefinitionatposition';\n    static #_3 = this.MAX_SOURCE_PREVIEW_LINES = 8;\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n      this.textModelResolverService = textModelResolverService;\n      this.languageService = languageService;\n      this.languageFeaturesService = languageFeaturesService;\n      this.toUnhook = new DisposableStore();\n      this.toUnhookForKeyboard = new DisposableStore();\n      this.currentWordAtPosition = null;\n      this.previousPromise = null;\n      this.editor = editor;\n      this.linkDecorations = this.editor.createDecorationsCollection();\n      const linkGesture = new ClickLinkGesture(editor);\n      this.toUnhook.add(linkGesture);\n      this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n        this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent ?? undefined);\n      }));\n      this.toUnhook.add(linkGesture.onExecute(mouseEvent => {\n        if (this.isEnabled(mouseEvent)) {\n          this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).catch(error => {\n            onUnexpectedError(error);\n          }).finally(() => {\n            this.removeLinkDecorations();\n          });\n        }\n      }));\n      this.toUnhook.add(linkGesture.onCancel(() => {\n        this.removeLinkDecorations();\n        this.currentWordAtPosition = null;\n      }));\n    }\n    static get(editor) {\n      return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        yield _this.startFindDefinition(position);\n        // Add listeners for editor cursor move and key down events\n        // Dismiss the \"extended\" editor decorations when the user hides\n        // the hover widget. There is no event for the widget itself so these\n        // serve as a best effort. After removing the link decorations, the hover\n        // widget is clean and will only show declarations per next request.\n        _this.toUnhookForKeyboard.add(_this.editor.onDidChangeCursorPosition(() => {\n          _this.currentWordAtPosition = null;\n          _this.removeLinkDecorations();\n          _this.toUnhookForKeyboard.clear();\n        }));\n        _this.toUnhookForKeyboard.add(_this.editor.onKeyDown(e => {\n          if (e) {\n            _this.currentWordAtPosition = null;\n            _this.removeLinkDecorations();\n            _this.toUnhookForKeyboard.clear();\n          }\n        }));\n      })();\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n      // check if we are active and on a content widget\n      if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n        return;\n      }\n      if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n        this.currentWordAtPosition = null;\n        this.removeLinkDecorations();\n        return;\n      }\n      const position = mouseEvent.target.position;\n      this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        _this2.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? _this2.editor.getModel()?.getWordAtPosition(position) : null;\n        if (!word) {\n          _this2.currentWordAtPosition = null;\n          _this2.removeLinkDecorations();\n          return;\n        }\n        // Return early if word at position is still the same\n        if (_this2.currentWordAtPosition && _this2.currentWordAtPosition.startColumn === word.startColumn && _this2.currentWordAtPosition.endColumn === word.endColumn && _this2.currentWordAtPosition.word === word.word) {\n          return;\n        }\n        _this2.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        const state = new EditorState(_this2.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n        if (_this2.previousPromise) {\n          _this2.previousPromise.cancel();\n          _this2.previousPromise = null;\n        }\n        _this2.previousPromise = createCancelablePromise(token => _this2.findDefinition(position, token));\n        let results;\n        try {\n          results = yield _this2.previousPromise;\n        } catch (error) {\n          onUnexpectedError(error);\n          return;\n        }\n        if (!results || !results.length || !state.validate(_this2.editor)) {\n          _this2.removeLinkDecorations();\n          return;\n        }\n        const linkRange = results[0].originSelectionRange ? Range.lift(results[0].originSelectionRange) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n        // Multiple results\n        if (results.length > 1) {\n          let combinedRange = linkRange;\n          for (const {\n            originSelectionRange\n          } of results) {\n            if (originSelectionRange) {\n              combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n            }\n          }\n          _this2.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n        } else {\n          // Single result\n          const result = results[0];\n          if (!result.uri) {\n            return;\n          }\n          _this2.textModelResolverService.createModelReference(result.uri).then(ref => {\n            if (!ref.object || !ref.object.textEditorModel) {\n              ref.dispose();\n              return;\n            }\n            const {\n              object: {\n                textEditorModel\n              }\n            } = ref;\n            const {\n              startLineNumber\n            } = result.range;\n            if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n              // invalid range\n              ref.dispose();\n              return;\n            }\n            const previewValue = _this2.getPreviewValue(textEditorModel, startLineNumber, result);\n            const languageId = _this2.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n            _this2.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n            ref.dispose();\n          });\n        }\n      })();\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n      let rangeToUse = result.range;\n      const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n      if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n        rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n      }\n      const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n      return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n      const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n      let minIndent = startIndent;\n      for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n        const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n        minIndent = Math.min(minIndent, endIndent);\n      }\n      const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n      return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n      const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n      const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n      let endLineNumber = startLineNumber + 1;\n      for (; endLineNumber < maxLineNumber; endLineNumber++) {\n        const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n        if (startIndent === endIndent) {\n          break;\n        }\n      }\n      return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n      const newDecorations = {\n        range: range,\n        options: {\n          description: 'goto-definition-link',\n          inlineClassName: 'goto-definition-link',\n          hoverMessage\n        }\n      };\n      this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n      this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n      return this.editor.hasModel() && mouseEvent.isLeftClick && mouseEvent.isNoneOrSingleMouseDown && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && !(mouseEvent.target.detail.injectedText?.options instanceof ModelDecorationInjectedTextOptions) && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n      const model = this.editor.getModel();\n      if (!model) {\n        return Promise.resolve(null);\n      }\n      return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, false, token);\n    }\n    gotoDefinition(position, openToSide) {\n      this.editor.setPosition(position);\n      return this.editor.invokeWithinContext(accessor => {\n        const canPeek = !openToSide && this.editor.getOption(89 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n        const action = new DefinitionAction({\n          openToSide,\n          openInPeek: canPeek,\n          muteMessage: true\n        }, {\n          title: {\n            value: '',\n            original: ''\n          },\n          id: '',\n          precondition: undefined\n        });\n        return action.run(accessor);\n      });\n    }\n    isInPeekEditor(accessor) {\n      const contextKeyService = accessor.get(IContextKeyService);\n      return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n      this.toUnhook.dispose();\n      this.toUnhookForKeyboard.dispose();\n    }\n  };\n  return GotoDefinitionAtPositionEditorContribution;\n})();\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([__param(1, ITextModelService), __param(2, ILanguageService), __param(3, ILanguageFeaturesService)], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","GotoDefinitionAtPositionEditorContribution_1","createCancelablePromise","onUnexpectedError","MarkdownString","DisposableStore","EditorState","registerEditorContribution","Range","ILanguageService","ITextModelService","ClickLinkGesture","PeekContext","nls","IContextKeyService","DefinitionAction","getDefinitionsAtPosition","ILanguageFeaturesService","ModelDecorationInjectedTextOptions","GotoDefinitionAtPositionEditorContribution","_","_2","ID","_3","MAX_SOURCE_PREVIEW_LINES","constructor","editor","textModelResolverService","languageService","languageFeaturesService","toUnhook","toUnhookForKeyboard","currentWordAtPosition","previousPromise","linkDecorations","createDecorationsCollection","linkGesture","add","onMouseMoveOrRelevantKeyDown","mouseEvent","keyboardEvent","startFindDefinitionFromMouse","undefined","onExecute","isEnabled","gotoDefinition","position","hasSideBySideModifier","catch","error","finally","removeLinkDecorations","onCancel","get","getContribution","startFindDefinitionFromCursor","_this","_asyncToGenerator","startFindDefinition","onDidChangeCursorPosition","clear","onKeyDown","e","withKey","type","hasModel","_this2","word","getModel","getWordAtPosition","startColumn","endColumn","state","cancel","token","findDefinition","results","validate","linkRange","originSelectionRange","lift","lineNumber","combinedRange","plusRange","addDecoration","appendText","localize","result","uri","createModelReference","then","ref","object","textEditorModel","dispose","startLineNumber","range","getLineCount","previewValue","getPreviewValue","languageId","guessLanguageIdByFilepathOrFirstLine","appendCodeblock","rangeToUse","numberOfLinesInRange","endLineNumber","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","startIndent","getLineFirstNonWhitespaceColumn","minIndent","endIndent","Math","min","getValueInRange","replace","RegExp","trim","maxLineNumber","hoverMessage","newDecorations","options","description","inlineClassName","set","isLeftClick","isNoneOrSingleMouseDown","detail","injectedText","hasTriggerModifier","keyCodeIsTriggerKey","definitionProvider","has","model","Promise","resolve","openToSide","setPosition","invokeWithinContext","accessor","canPeek","getOption","isInPeekEditor","action","openInPeek","muteMessage","title","value","original","id","precondition","run","contextKeyService","inPeekEditor","getValue"],"sources":["C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    static { GotoDefinitionAtPositionEditorContribution_1 = this; }\n    static { this.ID = 'editor.contrib.gotodefinitionatposition'; }\n    static { this.MAX_SOURCE_PREVIEW_LINES = 8; }\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent ?? undefined);\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    async startFindDefinitionFromCursor(position) {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        await this.startFindDefinition(position);\n        // Add listeners for editor cursor move and key down events\n        // Dismiss the \"extended\" editor decorations when the user hides\n        // the hover widget. There is no event for the widget itself so these\n        // serve as a best effort. After removing the link decorations, the hover\n        // widget is clean and will only show declarations per next request.\n        this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            this.toUnhookForKeyboard.clear();\n        }));\n        this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n            if (e) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }\n        }));\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    async startFindDefinition(position) {\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        this.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? this.editor.getModel()?.getWordAtPosition(position) : null;\n        if (!word) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        // Return early if word at position is still the same\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n            return;\n        }\n        this.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n        if (this.previousPromise) {\n            this.previousPromise.cancel();\n            this.previousPromise = null;\n        }\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n        let results;\n        try {\n            results = await this.previousPromise;\n        }\n        catch (error) {\n            onUnexpectedError(error);\n            return;\n        }\n        if (!results || !results.length || !state.validate(this.editor)) {\n            this.removeLinkDecorations();\n            return;\n        }\n        const linkRange = results[0].originSelectionRange\n            ? Range.lift(results[0].originSelectionRange)\n            : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n        // Multiple results\n        if (results.length > 1) {\n            let combinedRange = linkRange;\n            for (const { originSelectionRange } of results) {\n                if (originSelectionRange) {\n                    combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                }\n            }\n            this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n        }\n        else {\n            // Single result\n            const result = results[0];\n            if (!result.uri) {\n                return;\n            }\n            this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                if (!ref.object || !ref.object.textEditorModel) {\n                    ref.dispose();\n                    return;\n                }\n                const { object: { textEditorModel } } = ref;\n                const { startLineNumber } = result.range;\n                if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                    // invalid range\n                    ref.dispose();\n                    return;\n                }\n                const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                ref.dispose();\n            });\n        }\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(mouseEvent.target.detail.injectedText?.options instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, false, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(89 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}