{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar LinkDetector_1;\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nlet LinkDetector = /*#__PURE__*/(() => {\n  let LinkDetector = class LinkDetector extends Disposable {\n    static #_ = LinkDetector_1 = this;\n    static #_2 = this.ID = 'editor.linkDetector';\n    static get(editor) {\n      return editor.getContribution(LinkDetector_1.ID);\n    }\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n      super();\n      this.editor = editor;\n      this.openerService = openerService;\n      this.notificationService = notificationService;\n      this.languageFeaturesService = languageFeaturesService;\n      this.providers = this.languageFeaturesService.linkProvider;\n      this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', {\n        min: 1000,\n        max: 4000\n      });\n      this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n      this.computePromise = null;\n      this.activeLinksList = null;\n      this.currentOccurrences = {};\n      this.activeLinkDecorationId = null;\n      const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n      this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n        this._onEditorMouseMove(mouseEvent, keyboardEvent);\n      }));\n      this._register(clickLinkGesture.onExecute(e => {\n        this.onEditorMouseUp(e);\n      }));\n      this._register(clickLinkGesture.onCancel(e => {\n        this.cleanUpActiveLinkDecoration();\n      }));\n      this._register(editor.onDidChangeConfiguration(e => {\n        if (!e.hasChanged(71 /* EditorOption.links */)) {\n          return;\n        }\n        // Remove any links (for the getting disabled case)\n        this.updateDecorations([]);\n        // Stop any computation (for the getting disabled case)\n        this.stop();\n        // Start computing (for the getting enabled case)\n        this.computeLinks.schedule(0);\n      }));\n      this._register(editor.onDidChangeModelContent(e => {\n        if (!this.editor.hasModel()) {\n          return;\n        }\n        this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n      }));\n      this._register(editor.onDidChangeModel(e => {\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        this.stop();\n        this.computeLinks.schedule(0);\n      }));\n      this._register(editor.onDidChangeModelLanguage(e => {\n        this.stop();\n        this.computeLinks.schedule(0);\n      }));\n      this._register(this.providers.onDidChange(e => {\n        this.stop();\n        this.computeLinks.schedule(0);\n      }));\n      this.computeLinks.schedule(0);\n    }\n    computeLinksNow() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.editor.hasModel() || !_this.editor.getOption(71 /* EditorOption.links */)) {\n          return;\n        }\n        const model = _this.editor.getModel();\n        if (model.isTooLargeForSyncing()) {\n          return;\n        }\n        if (!_this.providers.has(model)) {\n          return;\n        }\n        if (_this.activeLinksList) {\n          _this.activeLinksList.dispose();\n          _this.activeLinksList = null;\n        }\n        _this.computePromise = createCancelablePromise(token => getLinks(_this.providers, model, token));\n        try {\n          const sw = new StopWatch(false);\n          _this.activeLinksList = yield _this.computePromise;\n          _this.debounceInformation.update(model, sw.elapsed());\n          if (model.isDisposed()) {\n            return;\n          }\n          _this.updateDecorations(_this.activeLinksList.links);\n        } catch (err) {\n          onUnexpectedError(err);\n        } finally {\n          _this.computePromise = null;\n        }\n      })();\n    }\n    updateDecorations(links) {\n      const useMetaKey = this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n      const oldDecorations = [];\n      const keys = Object.keys(this.currentOccurrences);\n      for (const decorationId of keys) {\n        const occurence = this.currentOccurrences[decorationId];\n        oldDecorations.push(occurence.decorationId);\n      }\n      const newDecorations = [];\n      if (links) {\n        // Not sure why this is sometimes null\n        for (const link of links) {\n          newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n        }\n      }\n      this.editor.changeDecorations(changeAccessor => {\n        const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        for (let i = 0, len = decorations.length; i < len; i++) {\n          const occurence = new LinkOccurrence(links[i], decorations[i]);\n          this.currentOccurrences[occurence.decorationId] = occurence;\n        }\n      });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n      const useMetaKey = this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n      if (this.isEnabled(mouseEvent, withKey)) {\n        this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (occurrence) {\n          this.editor.changeDecorations(changeAccessor => {\n            occurrence.activate(changeAccessor, useMetaKey);\n            this.activeLinkDecorationId = occurrence.decorationId;\n          });\n        }\n      } else {\n        this.cleanUpActiveLinkDecoration();\n      }\n    }\n    cleanUpActiveLinkDecoration() {\n      const useMetaKey = this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey';\n      if (this.activeLinkDecorationId) {\n        const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n        if (occurrence) {\n          this.editor.changeDecorations(changeAccessor => {\n            occurrence.deactivate(changeAccessor, useMetaKey);\n          });\n        }\n        this.activeLinkDecorationId = null;\n      }\n    }\n    onEditorMouseUp(mouseEvent) {\n      if (!this.isEnabled(mouseEvent)) {\n        return;\n      }\n      const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n      if (!occurrence) {\n        return;\n      }\n      this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n      if (!this.openerService) {\n        return;\n      }\n      const {\n        link\n      } = occurrence;\n      link.resolve(CancellationToken.None).then(uri => {\n        // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n        if (typeof uri === 'string' && this.editor.hasModel()) {\n          const modelUri = this.editor.getModel().uri;\n          if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n            const parsedUri = URI.parse(uri);\n            if (parsedUri.scheme === Schemas.file) {\n              const fsPath = resources.originalFSPath(parsedUri);\n              let relativePath = null;\n              if (fsPath.startsWith('/./') || fsPath.startsWith('\\\\.\\\\')) {\n                relativePath = `.${fsPath.substr(1)}`;\n              } else if (fsPath.startsWith('//./') || fsPath.startsWith('\\\\\\\\.\\\\')) {\n                relativePath = `.${fsPath.substr(2)}`;\n              }\n              if (relativePath) {\n                uri = resources.joinPath(modelUri, relativePath);\n              }\n            }\n          }\n        }\n        return this.openerService.open(uri, {\n          openToSide,\n          fromUserGesture,\n          allowContributedOpeners: true,\n          allowCommands: true,\n          fromWorkspace: true\n        });\n      }, err => {\n        const messageOrError = err instanceof Error ? err.message : err;\n        // different error cases\n        if (messageOrError === 'invalid') {\n          this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n        } else if (messageOrError === 'missing') {\n          this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n        } else {\n          onUnexpectedError(err);\n        }\n      });\n    }\n    getLinkOccurrence(position) {\n      if (!this.editor.hasModel() || !position) {\n        return null;\n      }\n      const decorations = this.editor.getModel().getDecorationsInRange({\n        startLineNumber: position.lineNumber,\n        startColumn: position.column,\n        endLineNumber: position.lineNumber,\n        endColumn: position.column\n      }, 0, true);\n      for (const decoration of decorations) {\n        const currentOccurrence = this.currentOccurrences[decoration.id];\n        if (currentOccurrence) {\n          return currentOccurrence;\n        }\n      }\n      return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n      return Boolean(mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && (mouseEvent.hasTriggerModifier || withKey && withKey.keyCodeIsTriggerKey));\n    }\n    stop() {\n      this.computeLinks.cancel();\n      if (this.activeLinksList) {\n        this.activeLinksList?.dispose();\n        this.activeLinksList = null;\n      }\n      if (this.computePromise) {\n        this.computePromise.cancel();\n        this.computePromise = null;\n      }\n    }\n    dispose() {\n      super.dispose();\n      this.stop();\n    }\n  };\n  return LinkDetector;\n})();\nLinkDetector = LinkDetector_1 = __decorate([__param(1, IOpenerService), __param(2, INotificationService), __param(3, ILanguageFeaturesService), __param(4, ILanguageFeatureDebounceService)], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n  general: ModelDecorationOptions.register({\n    description: 'detected-link',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link'\n  }),\n  active: ModelDecorationOptions.register({\n    description: 'detected-link-active',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active'\n  })\n};\nclass LinkOccurrence {\n  static decoration(link, useMetaKey) {\n    return {\n      range: link.range,\n      options: LinkOccurrence._getOptions(link, useMetaKey, false)\n    };\n  }\n  static _getOptions(link, useMetaKey, isActive) {\n    const options = {\n      ...(isActive ? decoration.active : decoration.general)\n    };\n    options.hoverMessage = getHoverMessage(link, useMetaKey);\n    return options;\n  }\n  constructor(link, decorationId) {\n    this.link = link;\n    this.decorationId = decorationId;\n  }\n  activate(changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n  }\n  deactivate(changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n  }\n}\nfunction getHoverMessage(link, useMetaKey) {\n  const executeCmd = link.url && /^command:/i.test(link.url.toString());\n  const label = link.tooltip ? link.tooltip : executeCmd ? nls.localize('links.navigate.executeCmd', 'Execute command') : nls.localize('links.navigate.follow', 'Follow link');\n  const kb = useMetaKey ? platform.isMacintosh ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\") : nls.localize('links.navigate.kb.meta', \"ctrl + click\") : platform.isMacintosh ? nls.localize('links.navigate.kb.alt.mac', \"option + click\") : nls.localize('links.navigate.kb.alt', \"alt + click\");\n  if (link.url) {\n    let nativeLabel = '';\n    if (/^command:/i.test(link.url.toString())) {\n      // Don't show complete command arguments in the native tooltip\n      const match = link.url.toString().match(/^command:([^?#]+)/);\n      if (match) {\n        const commandId = match[1];\n        nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n      }\n    }\n    const hoverMessage = new MarkdownString('', true).appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel).appendMarkdown(` (${kb})`);\n    return hoverMessage;\n  } else {\n    return new MarkdownString().appendText(`${label} (${kb})`);\n  }\n}\nclass OpenLinkAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.openLink',\n      label: nls.localize('label', \"Open Link\"),\n      alias: 'Open Link',\n      precondition: undefined\n    });\n  }\n  run(accessor, editor) {\n    const linkDetector = LinkDetector.get(editor);\n    if (!linkDetector) {\n      return;\n    }\n    if (!editor.hasModel()) {\n      return;\n    }\n    const selections = editor.getSelections();\n    for (const sel of selections) {\n      const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n      if (link) {\n        linkDetector.openLinkOccurrence(link, false);\n      }\n    }\n  }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(OpenLinkAction);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","LinkDetector_1","createCancelablePromise","RunOnceScheduler","CancellationToken","onUnexpectedError","MarkdownString","Disposable","Schemas","platform","resources","StopWatch","URI","EditorAction","registerEditorAction","registerEditorContribution","ModelDecorationOptions","ILanguageFeatureDebounceService","ILanguageFeaturesService","ClickLinkGesture","getLinks","nls","INotificationService","IOpenerService","LinkDetector","_","_2","ID","get","editor","getContribution","constructor","openerService","notificationService","languageFeaturesService","languageFeatureDebounceService","providers","linkProvider","debounceInformation","for","min","max","computeLinks","_register","computeLinksNow","computePromise","activeLinksList","currentOccurrences","activeLinkDecorationId","clickLinkGesture","onMouseMoveOrRelevantKeyDown","mouseEvent","keyboardEvent","_onEditorMouseMove","onExecute","e","onEditorMouseUp","onCancel","cleanUpActiveLinkDecoration","onDidChangeConfiguration","hasChanged","updateDecorations","stop","schedule","onDidChangeModelContent","hasModel","getModel","onDidChangeModel","onDidChangeModelLanguage","onDidChange","_this","_asyncToGenerator","getOption","model","isTooLargeForSyncing","has","dispose","token","sw","update","elapsed","isDisposed","links","err","useMetaKey","oldDecorations","keys","decorationId","occurence","push","newDecorations","link","LinkOccurrence","decoration","changeDecorations","changeAccessor","decorations","deltaDecorations","len","withKey","isEnabled","occurrence","getLinkOccurrence","position","activate","deactivate","openLinkOccurrence","hasSideBySideModifier","openToSide","fromUserGesture","resolve","None","then","uri","modelUri","scheme","file","startsWith","parsedUri","parse","fsPath","originalFSPath","relativePath","substr","joinPath","open","allowContributedOpeners","allowCommands","fromWorkspace","messageOrError","Error","message","warn","localize","url","toString","getDecorationsInRange","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","currentOccurrence","id","Boolean","type","hasTriggerModifier","keyCodeIsTriggerKey","cancel","general","register","description","stickiness","collapseOnReplaceEdit","inlineClassName","active","range","options","_getOptions","isActive","hoverMessage","getHoverMessage","changeDecorationOptions","executeCmd","test","label","tooltip","kb","isMacintosh","nativeLabel","match","commandId","appendLink","replace","appendMarkdown","appendText","OpenLinkAction","alias","precondition","undefined","run","accessor","linkDetector","selections","getSelections","sel","getEndPosition"],"sources":["C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/links.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar LinkDetector_1;\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nlet LinkDetector = class LinkDetector extends Disposable {\n    static { LinkDetector_1 = this; }\n    static { this.ID = 'editor.linkDetector'; }\n    static get(editor) {\n        return editor.getContribution(LinkDetector_1.ID);\n    }\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(71 /* EditorOption.links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    async computeLinksNow() {\n        if (!this.editor.hasModel() || !this.editor.getOption(71 /* EditorOption.links */)) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForSyncing()) {\n            return;\n        }\n        if (!this.providers.has(model)) {\n            return;\n        }\n        if (this.activeLinksList) {\n            this.activeLinksList.dispose();\n            this.activeLinksList = null;\n        }\n        this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n        try {\n            const sw = new StopWatch(false);\n            this.activeLinksList = await this.computePromise;\n            this.debounceInformation.update(model, sw.elapsed());\n            if (model.isDisposed()) {\n                return;\n            }\n            this.updateDecorations(this.activeLinksList.links);\n        }\n        catch (err) {\n            onUnexpectedError(err);\n        }\n        finally {\n            this.computePromise = null;\n        }\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        this.editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            for (let i = 0, len = decorations.length; i < len; i++) {\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\n                this.currentOccurrences[occurence.decorationId] = occurence;\n            }\n        });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(78 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./') || fsPath.startsWith('\\\\.\\\\')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./') || fsPath.startsWith('\\\\\\\\.\\\\')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            this.activeLinksList?.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector = LinkDetector_1 = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = { ...(isActive ? decoration.active : decoration.general) };\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n            }\n        }\n        const hoverMessage = new MarkdownString('', true)\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\n            .appendMarkdown(` (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(OpenLinkAction);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}