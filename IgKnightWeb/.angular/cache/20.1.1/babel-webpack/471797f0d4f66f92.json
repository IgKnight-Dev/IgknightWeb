{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar LightBulbWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './lightBulbWidget.css';\nimport { GlyphMarginLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { Range } from '../../../common/core/range.js';\nconst GUTTER_LIGHTBULB_ICON = registerIcon('gutter-lightbulb', Codicon.lightBulb, nls.localize('gutterLightbulbWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor.'));\nconst GUTTER_LIGHTBULB_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-auto-fix', Codicon.lightbulbAutofix, nls.localize('gutterLightbulbAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_ICON = registerIcon('gutter-lightbulb-sparkle', Codicon.lightbulbSparkle, nls.localize('gutterLightbulbAIFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-aifix-auto-fix', Codicon.lightbulbSparkleAutofix, nls.localize('gutterLightbulbAIFixAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nconst GUTTER_SPARKLE_FILLED_ICON = registerIcon('gutter-lightbulb-sparkle-filled', Codicon.sparkleFilled, nls.localize('gutterLightbulbSparkleFilledWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nvar LightBulbState;\n(function (LightBulbState) {\n  LightBulbState.Hidden = {\n    type: 0 /* Type.Hidden */\n  };\n  class Showing {\n    constructor(actions, trigger, editorPosition, widgetPosition) {\n      this.actions = actions;\n      this.trigger = trigger;\n      this.editorPosition = editorPosition;\n      this.widgetPosition = widgetPosition;\n      this.type = 1 /* Type.Showing */;\n    }\n  }\n  LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n  static #_ = LightBulbWidget_1 = this;\n  static #_2 = this.GUTTER_DECORATION = ModelDecorationOptions.register({\n    description: 'codicon-gutter-lightbulb-decoration',\n    glyphMarginClassName: ThemeIcon.asClassName(Codicon.lightBulb),\n    glyphMargin: {\n      position: GlyphMarginLane.Left\n    },\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n  });\n  static #_3 = this.ID = 'editor.contrib.lightbulbWidget';\n  static #_4 = this._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\n  constructor(_editor, _keybindingService) {\n    var _this;\n    super();\n    _this = this;\n    this._editor = _editor;\n    this._keybindingService = _keybindingService;\n    this._onClick = this._register(new Emitter());\n    this.onClick = this._onClick.event;\n    this._state = LightBulbState.Hidden;\n    this._gutterState = LightBulbState.Hidden;\n    this._iconClasses = [];\n    this.lightbulbClasses = ['codicon-' + GUTTER_LIGHTBULB_ICON.id, 'codicon-' + GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON.id, 'codicon-' + GUTTER_LIGHTBULB_AUTO_FIX_ICON.id, 'codicon-' + GUTTER_LIGHTBULB_AIFIX_ICON.id, 'codicon-' + GUTTER_SPARKLE_FILLED_ICON.id];\n    this.gutterDecoration = LightBulbWidget_1.GUTTER_DECORATION;\n    this._domNode = dom.$('div.lightBulbWidget');\n    this._domNode.role = 'listbox';\n    this._register(Gesture.ignoreTarget(this._domNode));\n    this._editor.addContentWidget(this);\n    this._register(this._editor.onDidChangeModelContent(_ => {\n      // cancel when the line in question has been removed\n      const editorModel = this._editor.getModel();\n      if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n        this.hide();\n      }\n      if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.gutterState.editorPosition.lineNumber >= editorModel.getLineCount()) {\n        this.gutterHide();\n      }\n    }));\n    this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n      if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n        return;\n      }\n      // Make sure that focus / cursor location is not lost when clicking widget icon\n      this._editor.focus();\n      e.preventDefault();\n      // a bit of extra work to make sure the menu\n      // doesn't cover the line-text\n      const {\n        top,\n        height\n      } = dom.getDomNodePagePosition(this._domNode);\n      const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      let pad = Math.floor(lineHeight / 3);\n      if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n        pad += lineHeight;\n      }\n      this._onClick.fire({\n        x: e.posx,\n        y: top + height + pad,\n        actions: this.state.actions,\n        trigger: this.state.trigger\n      });\n    }));\n    this._register(dom.addDisposableListener(this._domNode, 'mouseenter', e => {\n      if ((e.buttons & 1) !== 1) {\n        return;\n      }\n      // mouse enters lightbulb while the primary/left button\n      // is being pressed -> hide the lightbulb\n      this.hide();\n    }));\n    this._register(Event.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings, () => {\n      this._preferredKbLabel = this._keybindingService.lookupKeybinding(autoFixCommandId)?.getLabel() ?? undefined;\n      this._quickFixKbLabel = this._keybindingService.lookupKeybinding(quickFixCommandId)?.getLabel() ?? undefined;\n      this._updateLightBulbTitleAndIcon();\n    }));\n    this._register(this._editor.onMouseDown(/*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (e) {\n        if (!e.target.element || !_this.lightbulbClasses.some(cls => e.target.element && e.target.element.classList.contains(cls))) {\n          return;\n        }\n        if (_this.gutterState.type !== 1 /* LightBulbState.Type.Showing */) {\n          return;\n        }\n        // Make sure that focus / cursor location is not lost when clicking widget icon\n        _this._editor.focus();\n        // a bit of extra work to make sure the menu\n        // doesn't cover the line-text\n        const {\n          top,\n          height\n        } = dom.getDomNodePagePosition(e.target.element);\n        const lineHeight = _this._editor.getOption(67 /* EditorOption.lineHeight */);\n        let pad = Math.floor(lineHeight / 3);\n        if (_this.gutterState.widgetPosition.position !== null && _this.gutterState.widgetPosition.position.lineNumber < _this.gutterState.editorPosition.lineNumber) {\n          pad += lineHeight;\n        }\n        _this._onClick.fire({\n          x: e.event.posx,\n          y: top + height + pad,\n          actions: _this.gutterState.actions,\n          trigger: _this.gutterState.trigger\n        });\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()));\n  }\n  dispose() {\n    super.dispose();\n    this._editor.removeContentWidget(this);\n    if (this._gutterDecorationID) {\n      this._removeGutterDecoration(this._gutterDecorationID);\n    }\n  }\n  getId() {\n    return 'LightBulbWidget';\n  }\n  getDomNode() {\n    return this._domNode;\n  }\n  getPosition() {\n    return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n  }\n  update(actions, trigger, atPosition) {\n    if (actions.validActions.length <= 0) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const hasTextFocus = this._editor.hasTextFocus();\n    if (!hasTextFocus) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const options = this._editor.getOptions();\n    if (!options.get(65 /* EditorOption.lightbulb */).enabled) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const model = this._editor.getModel();\n    if (!model) {\n      this.gutterHide();\n      return this.hide();\n    }\n    const {\n      lineNumber,\n      column\n    } = model.validatePosition(atPosition);\n    const tabSize = model.getOptions().tabSize;\n    const fontInfo = this._editor.getOptions().get(50 /* EditorOption.fontInfo */);\n    const lineContent = model.getLineContent(lineNumber);\n    const indent = computeIndentLevel(lineContent, tabSize);\n    const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n    const isFolded = lineNumber => {\n      return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n    };\n    // Check for glyph margin decorations of any kind\n    const currLineDecorations = this._editor.getLineDecorations(lineNumber);\n    let hasDecoration = false;\n    if (currLineDecorations) {\n      for (const decoration of currLineDecorations) {\n        const glyphClass = decoration.options.glyphMarginClassName;\n        if (glyphClass && !this.lightbulbClasses.some(className => glyphClass.includes(className))) {\n          hasDecoration = true;\n          break;\n        }\n      }\n    }\n    let effectiveLineNumber = lineNumber;\n    let effectiveColumnNumber = 1;\n    if (!lineHasSpace) {\n      // Checks if line is empty or starts with any amount of whitespace\n      const isLineEmptyOrIndented = lineNumber => {\n        const lineContent = model.getLineContent(lineNumber);\n        return /^\\s*$|^\\s+/.test(lineContent) || lineContent.length <= effectiveColumnNumber;\n      };\n      if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n        const lineCount = model.getLineCount();\n        const endLine = lineNumber === lineCount;\n        const prevLineEmptyOrIndented = lineNumber > 1 && isLineEmptyOrIndented(lineNumber - 1);\n        const nextLineEmptyOrIndented = !endLine && isLineEmptyOrIndented(lineNumber + 1);\n        const currLineEmptyOrIndented = isLineEmptyOrIndented(lineNumber);\n        const notEmpty = !nextLineEmptyOrIndented && !prevLineEmptyOrIndented;\n        // check above and below. if both are blocked, display lightbulb in the gutter.\n        if (!nextLineEmptyOrIndented && !prevLineEmptyOrIndented && !hasDecoration) {\n          this.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: {\n              lineNumber: effectiveLineNumber,\n              column: effectiveColumnNumber\n            },\n            preference: LightBulbWidget_1._posPref\n          });\n          this.renderGutterLightbub();\n          return this.hide();\n        } else if (prevLineEmptyOrIndented || endLine || prevLineEmptyOrIndented && !currLineEmptyOrIndented) {\n          effectiveLineNumber -= 1;\n        } else if (nextLineEmptyOrIndented || notEmpty && currLineEmptyOrIndented) {\n          effectiveLineNumber += 1;\n        }\n      } else if (lineNumber === 1 && (lineNumber === model.getLineCount() || !isLineEmptyOrIndented(lineNumber + 1) && !isLineEmptyOrIndented(lineNumber))) {\n        // special checks for first line blocked vs. not blocked.\n        this.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n          position: {\n            lineNumber: effectiveLineNumber,\n            column: effectiveColumnNumber\n          },\n          preference: LightBulbWidget_1._posPref\n        });\n        if (hasDecoration) {\n          this.gutterHide();\n        } else {\n          this.renderGutterLightbub();\n          return this.hide();\n        }\n      } else if (lineNumber < model.getLineCount() && !isFolded(lineNumber + 1)) {\n        effectiveLineNumber += 1;\n      } else if (column * fontInfo.spaceWidth < 22) {\n        // cannot show lightbulb above/below and showing\n        // it inline would overlay the cursor...\n        return this.hide();\n      }\n      effectiveColumnNumber = /^\\S\\s*$/.test(model.getLineContent(effectiveLineNumber)) ? 2 : 1;\n    }\n    this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n      position: {\n        lineNumber: effectiveLineNumber,\n        column: effectiveColumnNumber\n      },\n      preference: LightBulbWidget_1._posPref\n    });\n    if (this._gutterDecorationID) {\n      this._removeGutterDecoration(this._gutterDecorationID);\n      this.gutterHide();\n    }\n    const validActions = actions.validActions;\n    const actionKind = actions.validActions[0].action.kind;\n    if (validActions.length !== 1 || !actionKind) {\n      this._editor.layoutContentWidget(this);\n      return;\n    }\n    this._editor.layoutContentWidget(this);\n  }\n  hide() {\n    if (this.state === LightBulbState.Hidden) {\n      return;\n    }\n    this.state = LightBulbState.Hidden;\n    this._editor.layoutContentWidget(this);\n  }\n  gutterHide() {\n    if (this.gutterState === LightBulbState.Hidden) {\n      return;\n    }\n    if (this._gutterDecorationID) {\n      this._removeGutterDecoration(this._gutterDecorationID);\n    }\n    this.gutterState = LightBulbState.Hidden;\n  }\n  get state() {\n    return this._state;\n  }\n  set state(value) {\n    this._state = value;\n    this._updateLightBulbTitleAndIcon();\n  }\n  get gutterState() {\n    return this._gutterState;\n  }\n  set gutterState(value) {\n    this._gutterState = value;\n    this._updateGutterLightBulbTitleAndIcon();\n  }\n  _updateLightBulbTitleAndIcon() {\n    this._domNode.classList.remove(...this._iconClasses);\n    this._iconClasses = [];\n    if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n      return;\n    }\n    let icon;\n    let autoRun = false;\n    if (this.state.actions.allAIFixes) {\n      icon = Codicon.sparkleFilled;\n      if (this.state.actions.validActions.length === 1) {\n        autoRun = true;\n      }\n    } else if (this.state.actions.hasAutoFix) {\n      if (this.state.actions.hasAIFix) {\n        icon = Codicon.lightbulbSparkleAutofix;\n      } else {\n        icon = Codicon.lightbulbAutofix;\n      }\n    } else if (this.state.actions.hasAIFix) {\n      icon = Codicon.lightbulbSparkle;\n    } else {\n      icon = Codicon.lightBulb;\n    }\n    this._updateLightbulbTitle(this.state.actions.hasAutoFix, autoRun);\n    this._iconClasses = ThemeIcon.asClassNameArray(icon);\n    this._domNode.classList.add(...this._iconClasses);\n  }\n  _updateGutterLightBulbTitleAndIcon() {\n    if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */) {\n      return;\n    }\n    let icon;\n    let autoRun = false;\n    if (this.gutterState.actions.allAIFixes) {\n      icon = GUTTER_SPARKLE_FILLED_ICON;\n      if (this.gutterState.actions.validActions.length === 1) {\n        autoRun = true;\n      }\n    } else if (this.gutterState.actions.hasAutoFix) {\n      if (this.gutterState.actions.hasAIFix) {\n        icon = GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON;\n      } else {\n        icon = GUTTER_LIGHTBULB_AUTO_FIX_ICON;\n      }\n    } else if (this.gutterState.actions.hasAIFix) {\n      icon = GUTTER_LIGHTBULB_AIFIX_ICON;\n    } else {\n      icon = GUTTER_LIGHTBULB_ICON;\n    }\n    this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix, autoRun);\n    const GUTTER_DECORATION = ModelDecorationOptions.register({\n      description: 'codicon-gutter-lightbulb-decoration',\n      glyphMarginClassName: ThemeIcon.asClassName(icon),\n      glyphMargin: {\n        position: GlyphMarginLane.Left\n      },\n      stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n    });\n    this.gutterDecoration = GUTTER_DECORATION;\n  }\n  /* Gutter Helper Functions */\n  renderGutterLightbub() {\n    const selection = this._editor.getSelection();\n    if (!selection) {\n      return;\n    }\n    if (this._gutterDecorationID === undefined) {\n      this._addGutterDecoration(selection.startLineNumber);\n    } else {\n      this._updateGutterDecoration(this._gutterDecorationID, selection.startLineNumber);\n    }\n  }\n  _addGutterDecoration(lineNumber) {\n    this._editor.changeDecorations(accessor => {\n      this._gutterDecorationID = accessor.addDecoration(new Range(lineNumber, 0, lineNumber, 0), this.gutterDecoration);\n    });\n  }\n  _removeGutterDecoration(decorationId) {\n    this._editor.changeDecorations(accessor => {\n      accessor.removeDecoration(decorationId);\n      this._gutterDecorationID = undefined;\n    });\n  }\n  _updateGutterDecoration(decorationId, lineNumber) {\n    this._editor.changeDecorations(accessor => {\n      accessor.changeDecoration(decorationId, new Range(lineNumber, 0, lineNumber, 0));\n      accessor.changeDecorationOptions(decorationId, this.gutterDecoration);\n    });\n  }\n  _updateLightbulbTitle(autoFix, autoRun) {\n    if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n      return;\n    }\n    if (autoRun) {\n      this.title = nls.localize('codeActionAutoRun', \"Run: {0}\", this.state.actions.validActions[0].action.title);\n    } else if (autoFix && this._preferredKbLabel) {\n      this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n    } else if (!autoFix && this._quickFixKbLabel) {\n      this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n    } else if (!autoFix) {\n      this.title = nls.localize('codeAction', \"Show Code Actions\");\n    }\n  }\n  set title(value) {\n    this._domNode.title = value;\n  }\n};\nLightBulbWidget = LightBulbWidget_1 = __decorate([__param(1, IKeybindingService)], LightBulbWidget);\nexport { LightBulbWidget };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","LightBulbWidget_1","dom","Gesture","Codicon","Emitter","Event","Disposable","ThemeIcon","GlyphMarginLane","ModelDecorationOptions","computeIndentLevel","autoFixCommandId","quickFixCommandId","nls","IKeybindingService","registerIcon","Range","GUTTER_LIGHTBULB_ICON","lightBulb","localize","GUTTER_LIGHTBULB_AUTO_FIX_ICON","lightbulbAutofix","GUTTER_LIGHTBULB_AIFIX_ICON","lightbulbSparkle","GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON","lightbulbSparkleAutofix","GUTTER_SPARKLE_FILLED_ICON","sparkleFilled","LightBulbState","Hidden","type","Showing","constructor","actions","trigger","editorPosition","widgetPosition","LightBulbWidget","_","_2","GUTTER_DECORATION","register","description","glyphMarginClassName","asClassName","glyphMargin","position","Left","stickiness","_3","ID","_4","_posPref","_editor","_keybindingService","_this","this","_onClick","_register","onClick","event","_state","_gutterState","_iconClasses","lightbulbClasses","id","gutterDecoration","_domNode","$","role","ignoreTarget","addContentWidget","onDidChangeModelContent","editorModel","getModel","state","lineNumber","getLineCount","hide","gutterState","gutterHide","addStandardDisposableGenericMouseDownListener","e","focus","preventDefault","top","height","getDomNodePagePosition","lineHeight","getOption","pad","Math","floor","fire","x","posx","y","addDisposableListener","buttons","runAndSubscribe","onDidUpdateKeybindings","_preferredKbLabel","lookupKeybinding","getLabel","undefined","_quickFixKbLabel","_updateLightBulbTitleAndIcon","onMouseDown","_ref","_asyncToGenerator","element","some","cls","classList","contains","_x","apply","dispose","removeContentWidget","_gutterDecorationID","_removeGutterDecoration","getId","getDomNode","getPosition","update","atPosition","validActions","hasTextFocus","options","getOptions","get","enabled","model","column","validatePosition","tabSize","fontInfo","lineContent","getLineContent","indent","lineHasSpace","spaceWidth","isFolded","getTopForLineNumber","currLineDecorations","getLineDecorations","hasDecoration","decoration","glyphClass","className","includes","effectiveLineNumber","effectiveColumnNumber","isLineEmptyOrIndented","test","lineCount","endLine","prevLineEmptyOrIndented","nextLineEmptyOrIndented","currLineEmptyOrIndented","notEmpty","preference","renderGutterLightbub","actionKind","action","kind","layoutContentWidget","value","_updateGutterLightBulbTitleAndIcon","remove","icon","autoRun","allAIFixes","hasAutoFix","hasAIFix","_updateLightbulbTitle","asClassNameArray","add","selection","getSelection","_addGutterDecoration","startLineNumber","_updateGutterDecoration","changeDecorations","accessor","addDecoration","decorationId","removeDecoration","changeDecoration","changeDecorationOptions","autoFix","title"],"sources":["C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar LightBulbWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './lightBulbWidget.css';\nimport { GlyphMarginLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { Range } from '../../../common/core/range.js';\nconst GUTTER_LIGHTBULB_ICON = registerIcon('gutter-lightbulb', Codicon.lightBulb, nls.localize('gutterLightbulbWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor.'));\nconst GUTTER_LIGHTBULB_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-auto-fix', Codicon.lightbulbAutofix, nls.localize('gutterLightbulbAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_ICON = registerIcon('gutter-lightbulb-sparkle', Codicon.lightbulbSparkle, nls.localize('gutterLightbulbAIFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-aifix-auto-fix', Codicon.lightbulbSparkleAutofix, nls.localize('gutterLightbulbAIFixAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nconst GUTTER_SPARKLE_FILLED_ICON = registerIcon('gutter-lightbulb-sparkle-filled', Codicon.sparkleFilled, nls.localize('gutterLightbulbSparkleFilledWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    static { LightBulbWidget_1 = this; }\n    static { this.GUTTER_DECORATION = ModelDecorationOptions.register({\n        description: 'codicon-gutter-lightbulb-decoration',\n        glyphMarginClassName: ThemeIcon.asClassName(Codicon.lightBulb),\n        glyphMargin: { position: GlyphMarginLane.Left },\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    }); }\n    static { this.ID = 'editor.contrib.lightbulbWidget'; }\n    static { this._posPref = [0 /* ContentWidgetPositionPreference.EXACT */]; }\n    constructor(_editor, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._gutterState = LightBulbState.Hidden;\n        this._iconClasses = [];\n        this.lightbulbClasses = [\n            'codicon-' + GUTTER_LIGHTBULB_ICON.id,\n            'codicon-' + GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON.id,\n            'codicon-' + GUTTER_LIGHTBULB_AUTO_FIX_ICON.id,\n            'codicon-' + GUTTER_LIGHTBULB_AIFIX_ICON.id,\n            'codicon-' + GUTTER_SPARKLE_FILLED_ICON.id\n        ];\n        this.gutterDecoration = LightBulbWidget_1.GUTTER_DECORATION;\n        this._domNode = dom.$('div.lightBulbWidget');\n        this._domNode.role = 'listbox';\n        this._register(Gesture.ignoreTarget(this._domNode));\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n            if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.gutterState.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.gutterHide();\n            }\n        }));\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(Event.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings, () => {\n            this._preferredKbLabel = this._keybindingService.lookupKeybinding(autoFixCommandId)?.getLabel() ?? undefined;\n            this._quickFixKbLabel = this._keybindingService.lookupKeybinding(quickFixCommandId)?.getLabel() ?? undefined;\n            this._updateLightBulbTitleAndIcon();\n        }));\n        this._register(this._editor.onMouseDown(async (e) => {\n            if (!e.target.element || !this.lightbulbClasses.some(cls => e.target.element && e.target.element.classList.contains(cls))) {\n                return;\n            }\n            if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(e.target.element);\n            const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.gutterState.widgetPosition.position !== null && this.gutterState.widgetPosition.position.lineNumber < this.gutterState.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.event.posx,\n                y: top + height + pad,\n                actions: this.gutterState.actions,\n                trigger: this.gutterState.trigger,\n            });\n        }));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n        if (this._gutterDecorationID) {\n            this._removeGutterDecoration(this._gutterDecorationID);\n        }\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            this.gutterHide();\n            return this.hide();\n        }\n        const hasTextFocus = this._editor.hasTextFocus();\n        if (!hasTextFocus) {\n            this.gutterHide();\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(65 /* EditorOption.lightbulb */).enabled) {\n            this.gutterHide();\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            this.gutterHide();\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = this._editor.getOptions().get(50 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        // Check for glyph margin decorations of any kind\n        const currLineDecorations = this._editor.getLineDecorations(lineNumber);\n        let hasDecoration = false;\n        if (currLineDecorations) {\n            for (const decoration of currLineDecorations) {\n                const glyphClass = decoration.options.glyphMarginClassName;\n                if (glyphClass && !this.lightbulbClasses.some(className => glyphClass.includes(className))) {\n                    hasDecoration = true;\n                    break;\n                }\n            }\n        }\n        let effectiveLineNumber = lineNumber;\n        let effectiveColumnNumber = 1;\n        if (!lineHasSpace) {\n            // Checks if line is empty or starts with any amount of whitespace\n            const isLineEmptyOrIndented = (lineNumber) => {\n                const lineContent = model.getLineContent(lineNumber);\n                return /^\\s*$|^\\s+/.test(lineContent) || lineContent.length <= effectiveColumnNumber;\n            };\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                const lineCount = model.getLineCount();\n                const endLine = lineNumber === lineCount;\n                const prevLineEmptyOrIndented = lineNumber > 1 && isLineEmptyOrIndented(lineNumber - 1);\n                const nextLineEmptyOrIndented = !endLine && isLineEmptyOrIndented(lineNumber + 1);\n                const currLineEmptyOrIndented = isLineEmptyOrIndented(lineNumber);\n                const notEmpty = !nextLineEmptyOrIndented && !prevLineEmptyOrIndented;\n                // check above and below. if both are blocked, display lightbulb in the gutter.\n                if (!nextLineEmptyOrIndented && !prevLineEmptyOrIndented && !hasDecoration) {\n                    this.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n                        position: { lineNumber: effectiveLineNumber, column: effectiveColumnNumber },\n                        preference: LightBulbWidget_1._posPref\n                    });\n                    this.renderGutterLightbub();\n                    return this.hide();\n                }\n                else if (prevLineEmptyOrIndented || endLine || (prevLineEmptyOrIndented && !currLineEmptyOrIndented)) {\n                    effectiveLineNumber -= 1;\n                }\n                else if (nextLineEmptyOrIndented || (notEmpty && currLineEmptyOrIndented)) {\n                    effectiveLineNumber += 1;\n                }\n            }\n            else if (lineNumber === 1 && (lineNumber === model.getLineCount() || !isLineEmptyOrIndented(lineNumber + 1) && !isLineEmptyOrIndented(lineNumber))) {\n                // special checks for first line blocked vs. not blocked.\n                this.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n                    position: { lineNumber: effectiveLineNumber, column: effectiveColumnNumber },\n                    preference: LightBulbWidget_1._posPref\n                });\n                if (hasDecoration) {\n                    this.gutterHide();\n                }\n                else {\n                    this.renderGutterLightbub();\n                    return this.hide();\n                }\n            }\n            else if ((lineNumber < model.getLineCount()) && !isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n            effectiveColumnNumber = /^\\S\\s*$/.test(model.getLineContent(effectiveLineNumber)) ? 2 : 1;\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: effectiveColumnNumber },\n            preference: LightBulbWidget_1._posPref\n        });\n        if (this._gutterDecorationID) {\n            this._removeGutterDecoration(this._gutterDecorationID);\n            this.gutterHide();\n        }\n        const validActions = actions.validActions;\n        const actionKind = actions.validActions[0].action.kind;\n        if (validActions.length !== 1 || !actionKind) {\n            this._editor.layoutContentWidget(this);\n            return;\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        if (this.state === LightBulbState.Hidden) {\n            return;\n        }\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    gutterHide() {\n        if (this.gutterState === LightBulbState.Hidden) {\n            return;\n        }\n        if (this._gutterDecorationID) {\n            this._removeGutterDecoration(this._gutterDecorationID);\n        }\n        this.gutterState = LightBulbState.Hidden;\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    get gutterState() { return this._gutterState; }\n    set gutterState(value) {\n        this._gutterState = value;\n        this._updateGutterLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        this._domNode.classList.remove(...this._iconClasses);\n        this._iconClasses = [];\n        if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n            return;\n        }\n        let icon;\n        let autoRun = false;\n        if (this.state.actions.allAIFixes) {\n            icon = Codicon.sparkleFilled;\n            if (this.state.actions.validActions.length === 1) {\n                autoRun = true;\n            }\n        }\n        else if (this.state.actions.hasAutoFix) {\n            if (this.state.actions.hasAIFix) {\n                icon = Codicon.lightbulbSparkleAutofix;\n            }\n            else {\n                icon = Codicon.lightbulbAutofix;\n            }\n        }\n        else if (this.state.actions.hasAIFix) {\n            icon = Codicon.lightbulbSparkle;\n        }\n        else {\n            icon = Codicon.lightBulb;\n        }\n        this._updateLightbulbTitle(this.state.actions.hasAutoFix, autoRun);\n        this._iconClasses = ThemeIcon.asClassNameArray(icon);\n        this._domNode.classList.add(...this._iconClasses);\n    }\n    _updateGutterLightBulbTitleAndIcon() {\n        if (this.gutterState.type !== 1 /* LightBulbState.Type.Showing */) {\n            return;\n        }\n        let icon;\n        let autoRun = false;\n        if (this.gutterState.actions.allAIFixes) {\n            icon = GUTTER_SPARKLE_FILLED_ICON;\n            if (this.gutterState.actions.validActions.length === 1) {\n                autoRun = true;\n            }\n        }\n        else if (this.gutterState.actions.hasAutoFix) {\n            if (this.gutterState.actions.hasAIFix) {\n                icon = GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON;\n            }\n            else {\n                icon = GUTTER_LIGHTBULB_AUTO_FIX_ICON;\n            }\n        }\n        else if (this.gutterState.actions.hasAIFix) {\n            icon = GUTTER_LIGHTBULB_AIFIX_ICON;\n        }\n        else {\n            icon = GUTTER_LIGHTBULB_ICON;\n        }\n        this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix, autoRun);\n        const GUTTER_DECORATION = ModelDecorationOptions.register({\n            description: 'codicon-gutter-lightbulb-decoration',\n            glyphMarginClassName: ThemeIcon.asClassName(icon),\n            glyphMargin: { position: GlyphMarginLane.Left },\n            stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        });\n        this.gutterDecoration = GUTTER_DECORATION;\n    }\n    /* Gutter Helper Functions */\n    renderGutterLightbub() {\n        const selection = this._editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        if (this._gutterDecorationID === undefined) {\n            this._addGutterDecoration(selection.startLineNumber);\n        }\n        else {\n            this._updateGutterDecoration(this._gutterDecorationID, selection.startLineNumber);\n        }\n    }\n    _addGutterDecoration(lineNumber) {\n        this._editor.changeDecorations((accessor) => {\n            this._gutterDecorationID = accessor.addDecoration(new Range(lineNumber, 0, lineNumber, 0), this.gutterDecoration);\n        });\n    }\n    _removeGutterDecoration(decorationId) {\n        this._editor.changeDecorations((accessor) => {\n            accessor.removeDecoration(decorationId);\n            this._gutterDecorationID = undefined;\n        });\n    }\n    _updateGutterDecoration(decorationId, lineNumber) {\n        this._editor.changeDecorations((accessor) => {\n            accessor.changeDecoration(decorationId, new Range(lineNumber, 0, lineNumber, 0));\n            accessor.changeDecorationOptions(decorationId, this.gutterDecoration);\n        });\n    }\n    _updateLightbulbTitle(autoFix, autoRun) {\n        if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n            return;\n        }\n        if (autoRun) {\n            this.title = nls.localize('codeActionAutoRun', \"Run: {0}\", this.state.actions.validActions[0].action.title);\n        }\n        else if (autoFix && this._preferredKbLabel) {\n            this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n        }\n        else if (!autoFix && this._quickFixKbLabel) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n        }\n        else if (!autoFix) {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget = LightBulbWidget_1 = __decorate([\n    __param(1, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}