{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RenderedHoverParts } from './hoverTypes.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { EditorHoverStatusBar } from './contentHoverStatusBar.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { ColorHoverParticipant } from '../../colorPicker/browser/colorHoverParticipant.js';\nimport { InlayHintsHover } from '../../inlayHints/browser/inlayHintsHover.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nexport class RenderedContentHover extends Disposable {\n  constructor(editor, hoverResult, participants, computer, context, keybindingService) {\n    super();\n    const anchor = hoverResult.anchor;\n    const parts = hoverResult.hoverParts;\n    this._renderedHoverParts = this._register(new RenderedContentHoverParts(editor, participants, parts, keybindingService, context));\n    const {\n      showAtPosition,\n      showAtSecondaryPosition\n    } = RenderedContentHover.computeHoverPositions(editor, anchor.range, parts);\n    this.shouldAppearBeforeContent = parts.some(m => m.isBeforeContent);\n    this.showAtPosition = showAtPosition;\n    this.showAtSecondaryPosition = showAtSecondaryPosition;\n    this.initialMousePosX = anchor.initialMousePosX;\n    this.initialMousePosY = anchor.initialMousePosY;\n    this.shouldFocus = computer.shouldFocus;\n    this.source = computer.source;\n  }\n  get domNode() {\n    return this._renderedHoverParts.domNode;\n  }\n  get domNodeHasChildren() {\n    return this._renderedHoverParts.domNodeHasChildren;\n  }\n  get focusedHoverPartIndex() {\n    return this._renderedHoverParts.focusedHoverPartIndex;\n  }\n  updateHoverVerbosityLevel(action, index, focus) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this._renderedHoverParts.updateHoverVerbosityLevel(action, index, focus);\n    })();\n  }\n  isColorPickerVisible() {\n    return this._renderedHoverParts.isColorPickerVisible();\n  }\n  static computeHoverPositions(editor, anchorRange, hoverParts) {\n    let startColumnBoundary = 1;\n    if (editor.hasModel()) {\n      // Ensure the range is on the current view line\n      const viewModel = editor._getViewModel();\n      const coordinatesConverter = viewModel.coordinatesConverter;\n      const anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\n      const anchorViewMinColumn = viewModel.getLineMinColumn(anchorViewRange.startLineNumber);\n      const anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, anchorViewMinColumn);\n      startColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\n    }\n    // The anchor range is always on a single line\n    const anchorStartLineNumber = anchorRange.startLineNumber;\n    let secondaryPositionColumn = anchorRange.startColumn;\n    let forceShowAtRange;\n    for (const hoverPart of hoverParts) {\n      const hoverPartRange = hoverPart.range;\n      const hoverPartRangeOnAnchorStartLine = hoverPartRange.startLineNumber === anchorStartLineNumber;\n      const hoverPartRangeOnAnchorEndLine = hoverPartRange.endLineNumber === anchorStartLineNumber;\n      const hoverPartRangeIsOnAnchorLine = hoverPartRangeOnAnchorStartLine && hoverPartRangeOnAnchorEndLine;\n      if (hoverPartRangeIsOnAnchorLine) {\n        // this message has a range that is completely sitting on the line of the anchor\n        const hoverPartStartColumn = hoverPartRange.startColumn;\n        const minSecondaryPositionColumn = Math.min(secondaryPositionColumn, hoverPartStartColumn);\n        secondaryPositionColumn = Math.max(minSecondaryPositionColumn, startColumnBoundary);\n      }\n      if (hoverPart.forceShowAtRange) {\n        forceShowAtRange = hoverPartRange;\n      }\n    }\n    let showAtPosition;\n    let showAtSecondaryPosition;\n    if (forceShowAtRange) {\n      const forceShowAtPosition = forceShowAtRange.getStartPosition();\n      showAtPosition = forceShowAtPosition;\n      showAtSecondaryPosition = forceShowAtPosition;\n    } else {\n      showAtPosition = anchorRange.getStartPosition();\n      showAtSecondaryPosition = new Position(anchorStartLineNumber, secondaryPositionColumn);\n    }\n    return {\n      showAtPosition,\n      showAtSecondaryPosition\n    };\n  }\n}\nclass RenderedStatusBar {\n  constructor(fragment, _statusBar) {\n    this._statusBar = _statusBar;\n    fragment.appendChild(this._statusBar.hoverElement);\n  }\n  get hoverElement() {\n    return this._statusBar.hoverElement;\n  }\n  get actions() {\n    return this._statusBar.actions;\n  }\n  dispose() {\n    this._statusBar.dispose();\n  }\n}\nclass RenderedContentHoverParts extends Disposable {\n  static #_ = this._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'content-hover-highlight',\n    className: 'hoverHighlight'\n  });\n  constructor(editor, participants, hoverParts, keybindingService, context) {\n    super();\n    this._renderedParts = [];\n    this._focusedHoverPartIndex = -1;\n    this._context = context;\n    this._fragment = document.createDocumentFragment();\n    this._register(this._renderParts(participants, hoverParts, context, keybindingService));\n    this._register(this._registerListenersOnRenderedParts());\n    this._register(this._createEditorDecorations(editor, hoverParts));\n    this._updateMarkdownAndColorParticipantInfo(participants);\n  }\n  _createEditorDecorations(editor, hoverParts) {\n    if (hoverParts.length === 0) {\n      return Disposable.None;\n    }\n    let highlightRange = hoverParts[0].range;\n    for (const hoverPart of hoverParts) {\n      const hoverPartRange = hoverPart.range;\n      highlightRange = Range.plusRange(highlightRange, hoverPartRange);\n    }\n    const highlightDecoration = editor.createDecorationsCollection();\n    highlightDecoration.set([{\n      range: highlightRange,\n      options: RenderedContentHoverParts._DECORATION_OPTIONS\n    }]);\n    return toDisposable(() => {\n      highlightDecoration.clear();\n    });\n  }\n  _renderParts(participants, hoverParts, hoverContext, keybindingService) {\n    const statusBar = new EditorHoverStatusBar(keybindingService);\n    const hoverRenderingContext = {\n      fragment: this._fragment,\n      statusBar,\n      ...hoverContext\n    };\n    const disposables = new DisposableStore();\n    for (const participant of participants) {\n      const renderedHoverParts = this._renderHoverPartsForParticipant(hoverParts, participant, hoverRenderingContext);\n      disposables.add(renderedHoverParts);\n      for (const renderedHoverPart of renderedHoverParts.renderedHoverParts) {\n        this._renderedParts.push({\n          type: 'hoverPart',\n          participant,\n          hoverPart: renderedHoverPart.hoverPart,\n          hoverElement: renderedHoverPart.hoverElement\n        });\n      }\n    }\n    const renderedStatusBar = this._renderStatusBar(this._fragment, statusBar);\n    if (renderedStatusBar) {\n      disposables.add(renderedStatusBar);\n      this._renderedParts.push({\n        type: 'statusBar',\n        hoverElement: renderedStatusBar.hoverElement,\n        actions: renderedStatusBar.actions\n      });\n    }\n    return toDisposable(() => {\n      disposables.dispose();\n    });\n  }\n  _renderHoverPartsForParticipant(hoverParts, participant, hoverRenderingContext) {\n    const hoverPartsForParticipant = hoverParts.filter(hoverPart => hoverPart.owner === participant);\n    const hasHoverPartsForParticipant = hoverPartsForParticipant.length > 0;\n    if (!hasHoverPartsForParticipant) {\n      return new RenderedHoverParts([]);\n    }\n    return participant.renderHoverParts(hoverRenderingContext, hoverPartsForParticipant);\n  }\n  _renderStatusBar(fragment, statusBar) {\n    if (!statusBar.hasContent) {\n      return undefined;\n    }\n    return new RenderedStatusBar(fragment, statusBar);\n  }\n  _registerListenersOnRenderedParts() {\n    const disposables = new DisposableStore();\n    this._renderedParts.forEach((renderedPart, index) => {\n      const element = renderedPart.hoverElement;\n      element.tabIndex = 0;\n      disposables.add(dom.addDisposableListener(element, dom.EventType.FOCUS_IN, event => {\n        event.stopPropagation();\n        this._focusedHoverPartIndex = index;\n      }));\n      disposables.add(dom.addDisposableListener(element, dom.EventType.FOCUS_OUT, event => {\n        event.stopPropagation();\n        this._focusedHoverPartIndex = -1;\n      }));\n    });\n    return disposables;\n  }\n  _updateMarkdownAndColorParticipantInfo(participants) {\n    const markdownHoverParticipant = participants.find(p => {\n      return p instanceof MarkdownHoverParticipant && !(p instanceof InlayHintsHover);\n    });\n    if (markdownHoverParticipant) {\n      this._markdownHoverParticipant = markdownHoverParticipant;\n    }\n    this._colorHoverParticipant = participants.find(p => p instanceof ColorHoverParticipant);\n  }\n  updateHoverVerbosityLevel(action, index, focus) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2._markdownHoverParticipant) {\n        return;\n      }\n      const normalizedMarkdownHoverIndex = _this2._normalizedIndexToMarkdownHoverIndexRange(_this2._markdownHoverParticipant, index);\n      if (normalizedMarkdownHoverIndex === undefined) {\n        return;\n      }\n      const renderedPart = yield _this2._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(action, normalizedMarkdownHoverIndex, focus);\n      if (!renderedPart) {\n        return;\n      }\n      _this2._renderedParts[index] = {\n        type: 'hoverPart',\n        participant: _this2._markdownHoverParticipant,\n        hoverPart: renderedPart.hoverPart,\n        hoverElement: renderedPart.hoverElement\n      };\n      _this2._context.onContentsChanged();\n    })();\n  }\n  isColorPickerVisible() {\n    return this._colorHoverParticipant?.isColorPickerVisible() ?? false;\n  }\n  _normalizedIndexToMarkdownHoverIndexRange(markdownHoverParticipant, index) {\n    const renderedPart = this._renderedParts[index];\n    if (!renderedPart || renderedPart.type !== 'hoverPart') {\n      return undefined;\n    }\n    const isHoverPartMarkdownHover = renderedPart.participant === markdownHoverParticipant;\n    if (!isHoverPartMarkdownHover) {\n      return undefined;\n    }\n    const firstIndexOfMarkdownHovers = this._renderedParts.findIndex(renderedPart => renderedPart.type === 'hoverPart' && renderedPart.participant === markdownHoverParticipant);\n    if (firstIndexOfMarkdownHovers === -1) {\n      throw new BugIndicatingError();\n    }\n    return index - firstIndexOfMarkdownHovers;\n  }\n  get domNode() {\n    return this._fragment;\n  }\n  get domNodeHasChildren() {\n    return this._fragment.hasChildNodes();\n  }\n  get focusedHoverPartIndex() {\n    return this._focusedHoverPartIndex;\n  }\n}","map":{"version":3,"names":["RenderedHoverParts","Disposable","DisposableStore","toDisposable","EditorHoverStatusBar","ModelDecorationOptions","Position","Range","dom","MarkdownHoverParticipant","ColorHoverParticipant","InlayHintsHover","BugIndicatingError","RenderedContentHover","constructor","editor","hoverResult","participants","computer","context","keybindingService","anchor","parts","hoverParts","_renderedHoverParts","_register","RenderedContentHoverParts","showAtPosition","showAtSecondaryPosition","computeHoverPositions","range","shouldAppearBeforeContent","some","m","isBeforeContent","initialMousePosX","initialMousePosY","shouldFocus","source","domNode","domNodeHasChildren","focusedHoverPartIndex","updateHoverVerbosityLevel","action","index","focus","_this","_asyncToGenerator","isColorPickerVisible","anchorRange","startColumnBoundary","hasModel","viewModel","_getViewModel","coordinatesConverter","anchorViewRange","convertModelRangeToViewRange","anchorViewMinColumn","getLineMinColumn","startLineNumber","anchorViewRangeStart","convertViewPositionToModelPosition","column","anchorStartLineNumber","secondaryPositionColumn","startColumn","forceShowAtRange","hoverPart","hoverPartRange","hoverPartRangeOnAnchorStartLine","hoverPartRangeOnAnchorEndLine","endLineNumber","hoverPartRangeIsOnAnchorLine","hoverPartStartColumn","minSecondaryPositionColumn","Math","min","max","forceShowAtPosition","getStartPosition","RenderedStatusBar","fragment","_statusBar","appendChild","hoverElement","actions","dispose","_","_DECORATION_OPTIONS","register","description","className","_renderedParts","_focusedHoverPartIndex","_context","_fragment","document","createDocumentFragment","_renderParts","_registerListenersOnRenderedParts","_createEditorDecorations","_updateMarkdownAndColorParticipantInfo","length","None","highlightRange","plusRange","highlightDecoration","createDecorationsCollection","set","options","clear","hoverContext","statusBar","hoverRenderingContext","disposables","participant","renderedHoverParts","_renderHoverPartsForParticipant","add","renderedHoverPart","push","type","renderedStatusBar","_renderStatusBar","hoverPartsForParticipant","filter","owner","hasHoverPartsForParticipant","renderHoverParts","hasContent","undefined","forEach","renderedPart","element","tabIndex","addDisposableListener","EventType","FOCUS_IN","event","stopPropagation","FOCUS_OUT","markdownHoverParticipant","find","p","_markdownHoverParticipant","_colorHoverParticipant","_this2","normalizedMarkdownHoverIndex","_normalizedIndexToMarkdownHoverIndexRange","updateMarkdownHoverVerbosityLevel","onContentsChanged","isHoverPartMarkdownHover","firstIndexOfMarkdownHovers","findIndex","hasChildNodes"],"sources":["C:/Users/abhis/OneDrive/Desktop/IgKnightWeb/IgKnightWeb/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHoverRendered.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RenderedHoverParts } from './hoverTypes.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { EditorHoverStatusBar } from './contentHoverStatusBar.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { ColorHoverParticipant } from '../../colorPicker/browser/colorHoverParticipant.js';\nimport { InlayHintsHover } from '../../inlayHints/browser/inlayHintsHover.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nexport class RenderedContentHover extends Disposable {\n    constructor(editor, hoverResult, participants, computer, context, keybindingService) {\n        super();\n        const anchor = hoverResult.anchor;\n        const parts = hoverResult.hoverParts;\n        this._renderedHoverParts = this._register(new RenderedContentHoverParts(editor, participants, parts, keybindingService, context));\n        const { showAtPosition, showAtSecondaryPosition } = RenderedContentHover.computeHoverPositions(editor, anchor.range, parts);\n        this.shouldAppearBeforeContent = parts.some(m => m.isBeforeContent);\n        this.showAtPosition = showAtPosition;\n        this.showAtSecondaryPosition = showAtSecondaryPosition;\n        this.initialMousePosX = anchor.initialMousePosX;\n        this.initialMousePosY = anchor.initialMousePosY;\n        this.shouldFocus = computer.shouldFocus;\n        this.source = computer.source;\n    }\n    get domNode() {\n        return this._renderedHoverParts.domNode;\n    }\n    get domNodeHasChildren() {\n        return this._renderedHoverParts.domNodeHasChildren;\n    }\n    get focusedHoverPartIndex() {\n        return this._renderedHoverParts.focusedHoverPartIndex;\n    }\n    async updateHoverVerbosityLevel(action, index, focus) {\n        this._renderedHoverParts.updateHoverVerbosityLevel(action, index, focus);\n    }\n    isColorPickerVisible() {\n        return this._renderedHoverParts.isColorPickerVisible();\n    }\n    static computeHoverPositions(editor, anchorRange, hoverParts) {\n        let startColumnBoundary = 1;\n        if (editor.hasModel()) {\n            // Ensure the range is on the current view line\n            const viewModel = editor._getViewModel();\n            const coordinatesConverter = viewModel.coordinatesConverter;\n            const anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\n            const anchorViewMinColumn = viewModel.getLineMinColumn(anchorViewRange.startLineNumber);\n            const anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, anchorViewMinColumn);\n            startColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\n        }\n        // The anchor range is always on a single line\n        const anchorStartLineNumber = anchorRange.startLineNumber;\n        let secondaryPositionColumn = anchorRange.startColumn;\n        let forceShowAtRange;\n        for (const hoverPart of hoverParts) {\n            const hoverPartRange = hoverPart.range;\n            const hoverPartRangeOnAnchorStartLine = hoverPartRange.startLineNumber === anchorStartLineNumber;\n            const hoverPartRangeOnAnchorEndLine = hoverPartRange.endLineNumber === anchorStartLineNumber;\n            const hoverPartRangeIsOnAnchorLine = hoverPartRangeOnAnchorStartLine && hoverPartRangeOnAnchorEndLine;\n            if (hoverPartRangeIsOnAnchorLine) {\n                // this message has a range that is completely sitting on the line of the anchor\n                const hoverPartStartColumn = hoverPartRange.startColumn;\n                const minSecondaryPositionColumn = Math.min(secondaryPositionColumn, hoverPartStartColumn);\n                secondaryPositionColumn = Math.max(minSecondaryPositionColumn, startColumnBoundary);\n            }\n            if (hoverPart.forceShowAtRange) {\n                forceShowAtRange = hoverPartRange;\n            }\n        }\n        let showAtPosition;\n        let showAtSecondaryPosition;\n        if (forceShowAtRange) {\n            const forceShowAtPosition = forceShowAtRange.getStartPosition();\n            showAtPosition = forceShowAtPosition;\n            showAtSecondaryPosition = forceShowAtPosition;\n        }\n        else {\n            showAtPosition = anchorRange.getStartPosition();\n            showAtSecondaryPosition = new Position(anchorStartLineNumber, secondaryPositionColumn);\n        }\n        return {\n            showAtPosition,\n            showAtSecondaryPosition,\n        };\n    }\n}\nclass RenderedStatusBar {\n    constructor(fragment, _statusBar) {\n        this._statusBar = _statusBar;\n        fragment.appendChild(this._statusBar.hoverElement);\n    }\n    get hoverElement() {\n        return this._statusBar.hoverElement;\n    }\n    get actions() {\n        return this._statusBar.actions;\n    }\n    dispose() {\n        this._statusBar.dispose();\n    }\n}\nclass RenderedContentHoverParts extends Disposable {\n    static { this._DECORATION_OPTIONS = ModelDecorationOptions.register({\n        description: 'content-hover-highlight',\n        className: 'hoverHighlight'\n    }); }\n    constructor(editor, participants, hoverParts, keybindingService, context) {\n        super();\n        this._renderedParts = [];\n        this._focusedHoverPartIndex = -1;\n        this._context = context;\n        this._fragment = document.createDocumentFragment();\n        this._register(this._renderParts(participants, hoverParts, context, keybindingService));\n        this._register(this._registerListenersOnRenderedParts());\n        this._register(this._createEditorDecorations(editor, hoverParts));\n        this._updateMarkdownAndColorParticipantInfo(participants);\n    }\n    _createEditorDecorations(editor, hoverParts) {\n        if (hoverParts.length === 0) {\n            return Disposable.None;\n        }\n        let highlightRange = hoverParts[0].range;\n        for (const hoverPart of hoverParts) {\n            const hoverPartRange = hoverPart.range;\n            highlightRange = Range.plusRange(highlightRange, hoverPartRange);\n        }\n        const highlightDecoration = editor.createDecorationsCollection();\n        highlightDecoration.set([{\n                range: highlightRange,\n                options: RenderedContentHoverParts._DECORATION_OPTIONS\n            }]);\n        return toDisposable(() => {\n            highlightDecoration.clear();\n        });\n    }\n    _renderParts(participants, hoverParts, hoverContext, keybindingService) {\n        const statusBar = new EditorHoverStatusBar(keybindingService);\n        const hoverRenderingContext = {\n            fragment: this._fragment,\n            statusBar,\n            ...hoverContext\n        };\n        const disposables = new DisposableStore();\n        for (const participant of participants) {\n            const renderedHoverParts = this._renderHoverPartsForParticipant(hoverParts, participant, hoverRenderingContext);\n            disposables.add(renderedHoverParts);\n            for (const renderedHoverPart of renderedHoverParts.renderedHoverParts) {\n                this._renderedParts.push({\n                    type: 'hoverPart',\n                    participant,\n                    hoverPart: renderedHoverPart.hoverPart,\n                    hoverElement: renderedHoverPart.hoverElement,\n                });\n            }\n        }\n        const renderedStatusBar = this._renderStatusBar(this._fragment, statusBar);\n        if (renderedStatusBar) {\n            disposables.add(renderedStatusBar);\n            this._renderedParts.push({\n                type: 'statusBar',\n                hoverElement: renderedStatusBar.hoverElement,\n                actions: renderedStatusBar.actions,\n            });\n        }\n        return toDisposable(() => { disposables.dispose(); });\n    }\n    _renderHoverPartsForParticipant(hoverParts, participant, hoverRenderingContext) {\n        const hoverPartsForParticipant = hoverParts.filter(hoverPart => hoverPart.owner === participant);\n        const hasHoverPartsForParticipant = hoverPartsForParticipant.length > 0;\n        if (!hasHoverPartsForParticipant) {\n            return new RenderedHoverParts([]);\n        }\n        return participant.renderHoverParts(hoverRenderingContext, hoverPartsForParticipant);\n    }\n    _renderStatusBar(fragment, statusBar) {\n        if (!statusBar.hasContent) {\n            return undefined;\n        }\n        return new RenderedStatusBar(fragment, statusBar);\n    }\n    _registerListenersOnRenderedParts() {\n        const disposables = new DisposableStore();\n        this._renderedParts.forEach((renderedPart, index) => {\n            const element = renderedPart.hoverElement;\n            element.tabIndex = 0;\n            disposables.add(dom.addDisposableListener(element, dom.EventType.FOCUS_IN, (event) => {\n                event.stopPropagation();\n                this._focusedHoverPartIndex = index;\n            }));\n            disposables.add(dom.addDisposableListener(element, dom.EventType.FOCUS_OUT, (event) => {\n                event.stopPropagation();\n                this._focusedHoverPartIndex = -1;\n            }));\n        });\n        return disposables;\n    }\n    _updateMarkdownAndColorParticipantInfo(participants) {\n        const markdownHoverParticipant = participants.find(p => {\n            return (p instanceof MarkdownHoverParticipant) && !(p instanceof InlayHintsHover);\n        });\n        if (markdownHoverParticipant) {\n            this._markdownHoverParticipant = markdownHoverParticipant;\n        }\n        this._colorHoverParticipant = participants.find(p => p instanceof ColorHoverParticipant);\n    }\n    async updateHoverVerbosityLevel(action, index, focus) {\n        if (!this._markdownHoverParticipant) {\n            return;\n        }\n        const normalizedMarkdownHoverIndex = this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant, index);\n        if (normalizedMarkdownHoverIndex === undefined) {\n            return;\n        }\n        const renderedPart = await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(action, normalizedMarkdownHoverIndex, focus);\n        if (!renderedPart) {\n            return;\n        }\n        this._renderedParts[index] = {\n            type: 'hoverPart',\n            participant: this._markdownHoverParticipant,\n            hoverPart: renderedPart.hoverPart,\n            hoverElement: renderedPart.hoverElement,\n        };\n        this._context.onContentsChanged();\n    }\n    isColorPickerVisible() {\n        return this._colorHoverParticipant?.isColorPickerVisible() ?? false;\n    }\n    _normalizedIndexToMarkdownHoverIndexRange(markdownHoverParticipant, index) {\n        const renderedPart = this._renderedParts[index];\n        if (!renderedPart || renderedPart.type !== 'hoverPart') {\n            return undefined;\n        }\n        const isHoverPartMarkdownHover = renderedPart.participant === markdownHoverParticipant;\n        if (!isHoverPartMarkdownHover) {\n            return undefined;\n        }\n        const firstIndexOfMarkdownHovers = this._renderedParts.findIndex(renderedPart => renderedPart.type === 'hoverPart'\n            && renderedPart.participant === markdownHoverParticipant);\n        if (firstIndexOfMarkdownHovers === -1) {\n            throw new BugIndicatingError();\n        }\n        return index - firstIndexOfMarkdownHovers;\n    }\n    get domNode() {\n        return this._fragment;\n    }\n    get domNodeHasChildren() {\n        return this._fragment.hasChildNodes();\n    }\n    get focusedHoverPartIndex() {\n        return this._focusedHoverPartIndex;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}