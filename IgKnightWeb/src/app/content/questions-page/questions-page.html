<div
  *ngIf="hasManageQuestionsPrivilege; else noAccess"
  class="bg-white rounded-xl ml-14 max-w-5xl shadow-sm border border-gray-200 overflow-hidden">
<div class="bg-white rounded-xl ml-14 max-w-5xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="bg-gradient-to-r from-purple-500 to-pink-600 px-6 py-4">
        <!-- Title & Description -->
        <h2 class="text-xl font-semibold text-white flex items-center">
        Question Builder
        </h2>
        <p class="text-purple-100 text-sm mt-1">
        Add and manage questions for your assignments
        </p>
        </div>

        <!-- Assignment Selector Box -->
        <div class="p-6">
        <div class="mb-8 p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300">
            <div class="max-w-md">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                Select Assignment
            </label>

            <!-- Angular select dropdown with two-way binding -->
            <select
                [(ngModel)]="selectedAssignmentId"
                name="assignment"
                class="bg-white border border-gray-300 focus:border-purple-500 focus:ring-purple-500 rounded-md px-3 py-2 w-full"
            >
                <option value="" disabled selected>Choose an assignment to add questions</option>
                <option *ngFor="let assignment of existingAssignments" [value]="assignment.id">
                {{ assignment.title }}
                </option>
            </select>
            </div>
        </div>
        <!-- Show this if no assignment is selected -->
        <div *ngIf="!selectedAssignmentId" class="text-gray-600 text-sm bg-yellow-50 p-4 rounded-lg border border-yellow-300">
            <h3 class="font-medium mb-1 text-yellow-800">Ready to Add Questions?</h3>
            <p>Select an assignment from the dropdown above to start building your question bank.</p>
            <p class="mt-2">ðŸ’¡ You can add multiple choice questions, set difficulty levels, and provide explanations.</p>
        </div>

        <div *ngIf="selectedAssignmentId != null && selectedAssignment">
        <app-question-detail
            [assignmentId]="selectedAssignmentId"
            [assignmentTitle]="selectedAssignment.title"
        ></app-question-detail>
        <app-question-list
            [assignmentId]="selectedAssignmentId"
            [assignmentTitle]="selectedAssignment.title">
        </app-question-list>
        </div>
    </div>
</div>
</div>
<!-- Show this if user lacks the privilege -->
<ng-template #noAccess>
  <div class="flex items-center justify-center ml-14 max-w-5xl">
    <div class="flex flex-col items-center bg-white border-2 border-red-500 text-red-700 p-8 rounded-xl shadow-lg max-w-xl w-full animate-fade-in">
      <div class="flex items-center gap-2 mb-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.29 3.86L1.82 18a1 1 0 00.86 1.5h18.64a1 1 0 00.86-1.5L13.71 3.86a1 1 0 00-1.72 0zM12 9v4m0 4h.01" />
        </svg>
        <h2 class="text-xl font-semibold">Access Denied</h2>
      </div>
      <p class="text-sm text-center mb-3 px-4">
        You do not have permission to create or manage questions.<br />
        If you believe this is an error, please contact your administrator.
      </p>
    </div>
  </div>
</ng-template>
